# docker-compose.yml
version: '3.8'

services:
  # The FastAPI backend service
  fastapi-app:
    build:
      context: ./fastapi-app
      dockerfile: Dockerfile
    container_name: fastapi-app-container
    ports:
      # We map port 8000 inside the container to port 3027 on the host
      - "3027:8000"
    volumes:
      # Mount the local folder to store uploaded images
      - ./fastapi-app/uploads:/app/uploads
    restart: always

  # New service for the QR Code Generator frontend
  qr-code-frontend:
    build:
      context: ./my-qrcode-app
      dockerfile: Dockerfile
    container_name: qrcode-app-container
    ports:
      # Map the container's port to port 3028 on the host for Nginx Proxy Manager
      - "3028:80"
    restart: always

  # New service for the Photo Uploader frontend
  photo-uploader-frontend:
    build:
      context: ./my-photo-uploader-app
      dockerfile: Dockerfile
    container_name: photo-uploader-app-container
    ports:
      # Map the container's port to port 3029 on the host for Nginx Proxy Manager
      - "3029:80"
    restart: always